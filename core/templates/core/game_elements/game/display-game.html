{% load static %}
{% load customtags %}
{% load i18n %}
{{ map_informations|json_script:"script_map_informations" }}
{{ current_player_id|json_script:"script_current_player_id" }}
<div id="chat" class="flex z-20 lg:inline hidden order-1 w-2/12 no-scrollbar place-content-center">
    <div class="inline-block md:mx-auto text-center text-emerald-300 text-sm p-2" id="chat-item-container">
        <fieldset class="relative flex-col text-xs mx-auto  w-auto border border-b-[#B1F1CB]/0 border-[#B1F1CB] text-start bg-gray-800 p-1">
            <legend class="text-xs text-start font-shadow font-bold text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md p-1 min-w-[5vw]"><p class="text-center">Chat & Log</p></legend>
            <span id="chat-item-container-element" class="flex flex-col p-2 gap-1 h-[70vh] max-h-[70vh] overflow-y-scroll thin-semi-transparent-scrollbar thin-semi-transparent-scrollbar:hover">
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
                <div class="flex flex-col text-wrap w-full mx-auto font-shadow text-start bg-slate-600/50 p-1">
                    <strong class="text-emerald-400 text-xs">Username (D/M/Y - H/M/S):</strong>
                    <p class="text-emerald-300 text-xs">consectetur adipiscing elit consectetur adipiscing elit Lorem ipsum dolor sit amet</p>
                </div>
            </span>
        </fieldset>
        <textarea name="chat-area" rows="4" cols="20" maxlength="150" placeholder="{% translate 'Send a message' %}..." class="w-full mx-auto rounded-b border-b border-l border-r border-[#B1F1CB] focus:outline-none bg-gray-800 text-emerald-300 text-xs text-emerald-300 font-bold text-sm p-2 no-scrollbar"></textarea>
        <input type="submit" id="chat-message-submit" hidden>
    </div>
</div>
<div id="map-background" class="flex lg:w-9/12 w-full h-full order-2 lg:flex-col flex-col mx-0 overflow-x-hidden no-scrollbar mt-2 justify-center items-center">
    <div class="flex z-100 mx-auto mb-2 justify-center lg:items-center">
        <div class="grid">
            <table class="tabletop-view">
                <tbody>
                {% for row in map_size_range.rows %}
                    {% if forloop.first %}
                        <td id="Y_X" class="flex text-center text-neutral-400 text-shadow font-bold w-[32px] h-[32px] uncrossable flex-row">
                            <span class="flex w-[32px] hidden" id="Y_X_y"></span>
                        </td>
                        {% for col in map_size_range.cols %}
                        <td id="X_{{ col }}" class="text-center text-shadow border border-slate-600 bg-gray-600/40 text-emerald-300 font-bold w-[32px] h-[32px] md:p-1 text-xs uncrossable">
                            {{ col }}
                        </td>
                        {% endfor %}
                    {% endif %}
                    <tr class="rows">
                        <td id="Y_{{ row }}" class="text-center text-emerald-300 font-bold border border-slate-600 bg-gray-600/40 text-shadow w-[32px] h-[32px] md:p-1 text-xs uncrossable">{{ row }}</td>
                        {% for col in map_size_range.cols %}
                            <td class="relative w-[32px] h-[32px] m-0 p-0 tile z-10" id="{{ row }}_{{ col }}">
                                <div class="relative w-[32px] h-[32px] z-20 coord-zone-div">
                                    <div class="absolute w-[32px] h-[32px] hidden" id="field-of-view"></div>
                                    <span class="absolute inline-block w-[32px] h-[32px]"></span>
                                </div>
                            </td>
                        {% endfor %}
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="context-menu" id="contextMenu"></div>
    <div id="modal-container" class="z-[100]"></div>
    <div class="w-full flex justify-center items-center z-100 lg:order-99 order-3 lg:hidden" dir="ltr" id="mobile-cross">
        <div class="flex w-full justify-center items-center lg:hidden lg:order-99 order-3">
            <div class="w-[20vw] h-[20vh] flex flex-col bg-gray-600/40 border border-slate-600 rounded">
                <button type='button' class="flex-1 w-full pb-5 relative" ontouchstart="clear_path()" id="top-left">
                    <img src="{% static 'ux/cancel_icon.svg' %}" class="w-[40px] h-[40px] inset-center"/>
                </button>
                <button type='button' class="flex-1 w-full pb-5 relative active:bg-emerald-400/40 bg-gray-800/50 border border-[#B1F1CB] direction-arrow" ontouchstart="display_pathfinding_mobile('left')" id="move-left">
                    <i class="fa-solid fa-left-long fa-2x active:text-emerald-300 text-emerald-400 inset-center arrow-icon fa-lg"></i>
                </button>
                <button type='button' class="flex-1 w-full pb-5 relative" id="top-right">
                    <i class="text-emerald-400 absolute bottom-0 fa-lg"></i>
                </button>
            </div>
            <div class="w-[20vw] h-[20vh] flex flex-col bg-gray-600/40 border border-slate-600 rounded" dir="ltr">
                <button type='button' class="flex-1 w-full pb-5 relative active:bg-emerald-400/40 bg-gray-800/50 border border-[#B1F1CB] direction-arrow" ontouchstart="display_pathfinding_mobile('top')" id="move-top">
                    <i class="fa-solid fa-up-long fa-2x active:text-emerald-300 text-emerald-400 inset-center arrow-icon fa-lg"></i>
                </button>
                <button type='button' class="flex-1 w-full pb-5 self-center relative" ontouchstart="mobile_movement_action()" id="center">
                    <i class="fa-solid fa-location-crosshairs fa-2x text-emerald-400 inset-center arrow-icon fa-lg"></i>
                </button>
                <button type='button' class="flex-1 w-full pb-5 self-bottom relative active:bg-emerald-400/40 bg-gray-800/50 border border-[#B1F1CB] direction-arrow" ontouchstart="display_pathfinding_mobile('bottom')" id="move-bottom">
                    <i class="fa-solid fa-down-long fa-2x active:text-emerald-300 text-emerald-400 inset-center arrow-icon fa-lg"></i>
                </button>
            </div>
            <div class="w-[20vw] h-[20vh] flex flex-col bg-gray-600/40 border border-slate-600 rounded" dir="rtl">
                <button type='button' class="flex-1 w-full pb-5 relative">
                    <i class="text-emerald-400 absolute top-0" id="bottom-left fa-lg"></i>
                </button>
                <button type='button' class="flex-1 w-full pb-5 relative active:bg-emerald-400/40 bg-gray-800/50 border border-[#B1F1CB] direction-arrow" ontouchstart="display_pathfinding_mobile('right')" id="move-right">
                    <i class="fa-solid fa-right-long fa-2x active:text-emerald-300 text-emerald-400 inset-center arrow-icon fa-lg"></i>
                </button>
                <button type='button' class="flex-1 w-full pb-5 relative" id="bottom-right">
                    <i class="text-emerald-400 absolute bottom-0 fa-lg"></i>
                </button>
            </div>
        </div>
    </div>
</div>
<div class="flex z-20 lg:inline hidden order-3 w-2/12 no-scrollbar h-full m-1" id="player-infos">
    {% for pc in map_informations.pc %}
        {% if pc.user.player == current_player_id %}
            <div id="player-info-item-container" class="w-full flex items-center justify-center gap-2 flex-row md:block h-full place-content-center thin-semi-transparent-scrollbar">
                <fieldset id="player-fieldset" class="flex text-xs items-start justify-center mx-auto gap-2 p-2 w-auto text-start flex-row border border-[#B1F1CB] rounded bg-gray-800 mb-2 min-h-[50px]">
                    <legend class="text-xs text-start font-shadow font-bold text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md p-1 min-w-[5vw] ">
                        <p class="text-center">{% translate "Character" %}</p>
                    </legend>
                    <div class="flex justify-start self-center">
                        <img class="w-24 h-auto h-auto max-w-xl rounded-lg" alt="image description" {% if pc.user.image %} srcset="/static/img/users/{{pc.user.player}}/0.gif" {% else %} srcset="{% static 'ux/default-user.svg' %}" {% endif %}>
                    </div>
                    <div class="flex w-full flex-col self-center">
                        <div class="flex w-full flex-col text-xs">
                            <label for="player-name" class="text-white">{% translate "Name" %}:</label>
                            <div id="player-name" class="text-emerald-300 font-bold">{{ pc.user.name }}</div>
                        </div>
                        <div class="flex w-full flex-col text-xs">
                            <label for="player-name" class="text-white">{% translate "Archetype" %}:</label>
                            <div id="player-name" class="text-emerald-300 font-bold">{{ pc.user.archetype_name }}</div>
                        </div>
                        <div class="flex w-full flex-col text-xs">
                            <label for="player-name" class="text-white">{% translate "Faction" %}:</label>
                            <div id="player-name" class="text-emerald-300 font-bold">{{ pc.faction.name }}</div>
                        </div>
                    </div>
                </fieldset>
                <fieldset id="status-fieldset" class="flex text-xs items-start justify-center mx-auto gap-1 p-2 w-auto text-start flex-col border border-[#B1F1CB] rounded bg-gray-800 mb-2 min-h-[75px]">
                    <legend class="text-xs text-start font-shadow font-bold text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md p-1 min-w-[5vw] ">
                        <p class="text-center">{% translate "Effects" %}</p>
                    </legend>
                </fieldset>
                <fieldset id="statistics-fieldset" class="flex text-xs items-start justify-center mx-auto gap-1 p-2 w-auto text-start flex-col border border-[#B1F1CB] rounded bg-gray-800 mb-2 min-h-[50px]">
                    <legend class="text-xs text-start font-shadow font-bold text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md p-1 min-w-[5vw] ">
                        <p class="text-center">{% translate "Statistics" %}</p>
                    </legend>
                    <div id="container-basic-stats" class="flex border border-[#B1F1CB] rounded bg-emerald-900/40 rounded-md p-2 w-full flex-col gap-1"> 
                        <label for="hp-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Hull points'%}</label> 
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute" style="width:{% widthratio pc.ship.current_hp pc.ship.max_hp 100 %}%"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="hp-container-value">
                                <span id="hp-container-value-min">{{pc.ship.current_hp}}</span>/<span id="hp-container-value-max">{{pc.ship.max_hp}}</span>
                            </span>
                        </div>
                        <label for="movement-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Movement points'%}</label>
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute" style="width:{% widthratio pc.ship.current_movement pc.ship.max_movement 100 %}%" id="movement-percent"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="movement-container-value">
                                <span id="movement-container-value-min">{{pc.ship.current_movement}}</span>/<span id="movement-container-value-max">{{pc.ship.max_movement}}</span>
                            </span>
                        </div>
                        <label for="actionPoint-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Action points'%}</label>
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute"style="width:{% widthratio pc.user.current_ap pc.user.max_ap 100 %}%"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="actionPoint-container-value">
                                <span id="actionPoint-container-value-min">{{pc.user.current_ap}}</span>/<span id="actionPoint-container-value-max">{{pc.user.max_ap}}</span>
                            </span>
                        </div>
                    </div>
                    <div id="container-basic-stats" class="flex border border-[#B1F1CB] rounded bg-emerald-900/40 rounded-md p-2 w-full flex-col gap-1"> 
                        <label for="ballistic-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Ballistic defense'%}</label>
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute" style="width:{% widthratio pc.ship.current_ballistic_defense pc.ship.max_ballistic_defense 100 %}%"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="ballistic-container-value">
                                <span id="ballistic-container-value-min">{{pc.ship.current_ballistic_defense}}</span>/<span id="ballistic-container-value-max">{{pc.ship.max_ballistic_defense}}</span>
                            </span>
                        </div>
                        <label for="thermal-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Thermal defense'%}</label>
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute" style="width:{% widthratio pc.ship.current_thermal_defense pc.ship.max_thermal_defense 100 %}%"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="thermal-container-value">
                                <span id="thermal-container-value-min">{{pc.ship.current_thermal_defense}}</span>/<span id="thermal-container-value-max">{{pc.ship.max_thermal_defense}}</span>
                            </span>
                        </div>
                        <label for="missile-container" class="font-bold font-shadow text-emerald-300 text-xs">{% translate 'Missile defense'%}</label>
                        <div class="w-full bg-red-600 relative h-[15px] text-start">
                            <div class="bg-blue-600 leading-none h-[15px] absolute" style="width:{% widthratio pc.ship.current_missile_defense pc.ship.max_missile_defense 100 %}%"></div>
                            <span class="absolute w-full z-10 text-center text-xs font-bold font-shadow text-blue-100 text-center justify-center items-center gap-1" id="missile-container-value">
                                <span id="missile-container-value-min">{{pc.ship.current_missile_defense}}</span>/<span id="missile-container-value-max">{{pc.ship.max_missile_defense}}</span>
                            </span>
                        </div>
                    </div>
                </fieldset>
                <div id="button-menu" class="border border-[#B1F1CB] rounded bg-emerald-900/40 p-6">
                    <ul class="grid grid-cols-3 gap-3">
                        <li data-tooltip-target="character-tooltip" data-tooltip-placement="bottom" data-modal-target="character-modal" data-modal-toggle="character-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center z-1">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-user fa-lg"></i>
                            </div>
                            <div id="character-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Character" %}
                                <div class="map-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="inventory-tooltip" data-tooltip-placement="bottom" data-modal-target="inventory-modal" data-modal-toggle="inventory-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-box fa-lg"></i>
                            </div>
                            <div id="inventory-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Inventory" %}
                                <div class="map-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="faction-tooltip" data-tooltip-placement="bottom" data-modal-target="faction-modal" data-modal-toggle="faction-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-people-group fa-lg"></i>
                            </div>
                            <div id="faction-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Faction" %}
                                <div class="map-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="research-tooltip" data-tooltip-placement="bottom" data-modal-target="research-modal" data-modal-toggle="research-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-brain fa-lg"></i>
                            </div>
                            <div id="research-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Research" %}
                                <div class="map-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="map-tooltip" data-tooltip-placement="bottom" data-modal-target="map-modal" data-modal-toggle="map-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-map fa-lg"></i>
                            </div>
                            <div id="map-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Map" %}
                                <div class="map-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="task-tooltip" data-tooltip-placement="bottom" data-tooltip-placement="bottom" data-modal-target="task-modal" data-modal-toggle="task-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-list-check fa-lg"></i>
                            </div>
                            <div id="task-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Tasks" %}
                                <div class="tooltip-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="event-tooltip" data-tooltip-placement="bottom" data-modal-target="event-modal" data-modal-toggle="event-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-mobile-screen-button fa-lg"></i>
                            </div>
                            <div id="event-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Events" %}
                                <div class="tooltip-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="message-tooltip" data-tooltip-placement="bottom" data-modal-target="message-modal" data-modal-target="message-modal" data-modal-toggle="message-modal" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-envelope fa-lg"></i>
                            </div>
                            <div id="message-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Message" %}
                                <div class="tooltip-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <li data-tooltip-target="forum-tooltip" data-tooltip-placement="bottom" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center">
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-comments fa-lg"></i>
                            </div>
                            <div id="forum-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Forum" %}
                                <div class="tooltip-arrow" data-popper-arrow></div>
                            </div>
                        </li>
                        <form data-tooltip-target="logout-tooltip" data-tooltip-placement="bottom" method="post" action="{% url 'core:logout_view' %}" class="flex flex-row h-[15px] cursor-pointer p-1 gap-2 text-emerald-400 hover:text-emerald-300 button-panel justify-center items-center logout">
                            {% csrf_token %}
                            <div class="w-auto flex items-center">
                                <i class="fa-solid fa-home fa-lg"></i>
                            </div>
                            <div id="logout-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                                {% translate "Logout" %}
                                <div class="tooltip-arrow" data-popper-arrow></div>
                            </div>
                            <button type="submit" id="logout-btn" class="hidden"></button>
                        </form>
                    </ul>
                </div>
            </div>
        {% endif %}
    {% endfor %}
</div>

<script src="{% static 'world_builder/world/sonar.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/sonar_ship_display.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/sonar_ship_display_other_player.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/observable_zone.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/check_pc_npc_visibility.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/game.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/navbar_game.js'%}" type="application/javascript"></script>
<script src="{% static 'world_builder/classes/player.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/modals.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_background.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_foreground.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_borders.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_npc.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_pc.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_sector_overflow.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/update_user_coordinates.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/add_sector_elements.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/occured_event_display.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/async/async_movements.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/async/async_actions.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/pathfinding.js'%}" type='application/javascript'></script>
<script src="{% static 'world_builder/world/pathfinding_mobile.js'%}" type='application/javascript'></script>
<script src="{% static 'js/game/world_builder/account/logout.js' %}" type="application/javascript"></script>