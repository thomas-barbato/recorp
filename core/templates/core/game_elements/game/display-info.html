{% load static %}
{% load i18n %}

<div id="info-container" class="flex w-full flex-col overflow-hidden mx-auto order-1 m-0 text-sm text-emerald-200 shadow-lg backdrop-blur-md lg:blur-none">

  <div class="lg:flex lg:grid-cols-0 grid grid-cols-2 w-full lg:justify-center justify-between gap-1 p-2 ">

    <!-- === MOBILE PLAYER INFO === -->
    <div id="mobile-info-player-container" class="flex flex-col w-full lg:hidden gap-2 text-emerald-300">

      <!-- Player Informations -->
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40 text-emerald-200">
        <div class="flex justify-between text-xs"><span class="uppercase font-bold">{% translate "Name" %}</span><span class="text-emerald-200 text-xs" id="player-name">{{ current_player_state.user.name }}</span></div>
        <div class="flex justify-between text-xs"><span class="uppercase font-bold">{% translate "Coord" %}</span>
          <span class="text-emerald-200 text-xs justify-between gap-1" id="player-coordinates-mobile">
            <span class="text-xs font-bold">[Y:</span>
            <span id="player-coord-y-mobile" class="text-xs">{{current_player_state.user.coordinates.y}}</span>
            <span class="text-xs font-bold">;</span> 
            <span class="text-xs font-bold">X:</span>
            <span id="player-coord-x-mobile" class="text-xs">{{current_player_state.user.coordinates.x}}</span>
            <span class="text-xs font-bold">]</span>
          </span>
        </div>
        <div class="flex justify-between text-xs"><span class="uppercase font-bold">{% translate "Faction" %}</span><span class="text-emerald-200 text-xs" id="player-faction">{{ current_player_state.faction.name }}</span></div>
      </fieldset>

      <!-- Ship Stats -->
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40 text-emerald-200 ">
        {% comment %} Hull Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--shieldcomb w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider font-bold text-xs">{% translate 'Hull' %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="hp-container-value-min" class="text-emerald-200 text-xs">{{current_player_state.ship.current_hp}}</span>
            <span>/</span>
            <span id="hp-container-value-max" class="text-emerald-200 text-xs">{{current_player_state.ship.max_hp}}</span>
          </span>
        </div>
        {% comment %} Movement Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--interceptor-ship w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider font-bold text-xs">{% translate 'Movement' %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="movement-container-value-current" class="text-emerald-200 text-xs">{{current_player_state.ship.current_movement}}</span>
            <span>/</span>
            <span id="movement-container-value-max" class="text-emerald-200 text-xs">{{current_player_state.ship.max_movement}}</span>
          </span>
        </div>

        {% comment %} Action Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--targeting w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider font-bold text-xs">{% translate 'Action' %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="ap-container-value-min" class="text-emerald-200 text-xs">{{current_player_state.user.current_ap}}</span>
            <span>/</span>
            <span id="ap-container-value-max" class="text-emerald-200 text-xs">{{current_player_state.user.max_ap}}</span>
          </span>
        </div>
      </fieldset>
    </div>

    <!-- === SECTOR INFO (DESKTOP) === -->
    <div id="info-sector-container" class="hidden lg:flex flex-col w-full text-center z-20 border-none rounded-xl select-none">
      <div class="flex flex-row w-full">
        <div class="flex flex-row gap-3 justify-start items-center overflow-hidden">
            <!-- Image du joueur -->
            <div class="flex-shrink-0 flex justify-center items-center w-[72px] h-[72px] rounded-lg border border-emerald-400/40 bg-emerald-900/20 overflow-hidden shadow-md shadow-emerald-900/20">
                <img class="object-cover w-[72px] h-[72px] rounded-md" alt="player image" srcset="/static/img/users/{{current_player_state.user.player}}/0.gif">
            </div>
            <!-- Texte -->
            <div class="flex flex-col text-left w-full overflow-hidden gap-1">
                <div class="text-emerald-300 font-bold text-sm leading-tight truncate font-orbitron">
                    {{ current_player_state.user.name }}
                </div>
                <!-- Player coords -->
                <div class="flex items-center bg-zinc-800/70 border border-emerald-400/40 rounded-lg overflow-hidden">
                  <i class="fa-solid fa-arrows-to-eye px-2 text-emerald-200"></i>
                  <span id="player-coord-y" class=" p-1 font-bold text-emerald-400 bg-zinc-900/70">00</span>
                  <span id="player-coord-x" class=" p-1 font-bold text-zinc-900 bg-emerald-400 rounded-r">00</span>
                </div>
            </div>
        </div>
        <div class="flex flex-wrap justify-center items-center gap-2 mx-auto">
        </div>
        <form data-tooltip-target="logout-tooltip" data-tooltip-placement="left" method="post" action="{% url 'core:logout_view' %}" class="flex p-2 items-center justify-center text-emerald-400 hover:text-emerald-300 cursor-pointer logout">
            {% csrf_token %}
            <div class="w-auto flex items-center shadow-inner shadow-emerald-900/30 transition-transform duration-300 hover:scale-[1.05]">
                <span class="fa fa-sign-out-alt fa-2x"></span>
            </div>
            <div id="logout-tooltip" role="tooltip" class="absolute z-98 invisible inline-block px-3 py-2 text-sm font-bold transition-opacity duration-300 shadow-xs opacity-0 tooltip  text-emerald-300 bg-emerald-900 border border-[#B1F1CB] rounded-md">
                {% translate "Log out" %}
                <div class="tooltip-arrow" data-popper-arrow></div>
            </div>
            <button type="submit" id="logout-btn" class="hidden"></button>
        </form>
      </div>
    </div>
    <!-- === SECTOR INFO (MOBILE) === -->
    <div id="info-sector-container-mobile" class="flex flex-col w-full lg:hidden gap-2 text-emerald-200">
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40 text-emerald-200">
        <div class="flex justify-between text-xs"><span class="uppercase font-bold text-xs">{% translate "Sector" %}</span><span class="text-emerald-200 text-xs" id="sector-name">{{ map_informations.sector.name }}</span></div>
        <div class="flex justify-between text-xs"><span class="uppercase font-bold text-xs">{% translate "Faction" %}</span><span class="text-emerald-200 text-xs" id="sector-faction">{{ map_informations.sector.faction.name }}</span></div>
        <div class="flex justify-between text-xs"><span class="uppercase font-bold text-xs">{% translate "Security level" %}</span><span class="text-emerald-200 text-xs" id="sector-security">{{ map_informations.sector.security.translated_name }}</span></div>
      </fieldset>

      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40">
        <!-- Ballistic defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--shield-reflect w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider text-xs font-bold">{% translate "Ballistic" %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="ballistic-container-value-min" class="text-xs">{{ current_player_state.ship.current_ballistic_defense }}</span>
            <span>/</span>
            <span id="ballistic-container-value-max" class="text-xs">{{ current_player_state.ship.max_ballistic_defense }}</span>
          </span>
        </div>

        <!-- Thermal defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--laser-warning w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider text-xs font-bold">{% translate "Thermal" %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="thermal-container-value-min" class="text-xs">{{ current_player_state.ship.current_thermal_defense }}</span>
            <span>/</span>
            <span id="thermal-container-value-max" class="text-xs">{{ current_player_state.ship.max_thermal_defense }}</span>
          </span>
        </div>

        <!-- Missile defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-200">
            <span class="iconify game-icons--dragon-shield w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider text-xs font-bold">{% translate "Missile" %}</span>
          </div>
          <span class="flex justify-between text-xs gap-1">
            <span id="missile-container-value-min" class="text-xs">{{ current_player_state.ship.current_missile_defense }}</span>
            <span>/</span>
            <span id="missile-container-value-max" class="text-xs">{{ current_player_state.ship.max_missile_defense }}</span>
          </span>
        </div>
      </fieldset>
    </div>
  </div>

  <!-- === MOBILE BOTTOM BUTTONS === -->
  <div class="flex w-full lg:hidden flex-col p-2 justify-center flex-row ">
    <div class="flex w-full flex-row justify-center gap-8 p-2 text-emerald-300 border border-emerald-400/40 rounded-xl bg-emerald-900/30">
        <i class="iconify w-[2em] h-[2em] game-icons--radar-sweep transition" id="sonar-toggle-btn"></i>
        <i data-modal-target="chat-modal"class="fa-solid fa-walkie-talkie fa-2x transition" id="chat-modal-button-mobile"></i>
        <i data-modal-target="message-modal" class="fa-solid fa-envelope fa-2x transition" id="message-modal-button-mobile" ></i>
    </div>
  </div>

</div>
<script>
</script>