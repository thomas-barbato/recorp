{% load static %}
{% load i18n %}

{% for pc in map_informations.pc %}
{% if pc.user.player == current_player_id %}
<div id="info-container" class="flex w-full flex-col overflow-hidden mx-auto order-1 text-sm text-emerald-200 bg-zinc-900/60 border border-emerald-500/30 shadow-lg backdrop-blur-md lg:blur-none">

  <div class="lg:flex lg:grid-cols-0 grid grid-cols-2 w-full lg:justify-center justify-between gap-2 p-2">

    <!-- === MOBILE PLAYER INFO === -->
    <div id="mobile-info-player-container" class="flex flex-col w-full lg:hidden gap-2 text-emerald-300">

      <!-- Player Informations -->
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40 text-emerald-200">
        <div class="flex justify-between"><span class="uppercase">{% translate "Name" %}</span><span class="text-emerald-200 font-bold" id="player-name">{{ pc.user.name }}</span></div>
        <div class="flex justify-between"><span class="uppercase">{% translate "Archetype" %}</span><span class="text-emerald-200 font-bold" id="player-archetype">{{ pc.user.archetype_name }}</span></div>
        <div class="flex justify-between"><span class="uppercase">{% translate "Faction" %}</span><span class="text-emerald-200 font-bold" id="player-faction">{{ pc.faction.name }}</span></div>
      </fieldset>

      <!-- Ship Stats -->
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40">
        {% comment %} Hull Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--shieldcomb w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate 'Hull' %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="hp-container-value-min">{{pc.ship.current_hp}}</span> /
            <span id="hp-container-value-max">{{pc.ship.max_hp}}</span>
          </span>
        </div>
        {% comment %} Movement Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--spaceship w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate 'Movement' %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="movement-container-value-current">{{pc.ship.current_movement}}</span> /
            <span id="movement-container-value-max">{{pc.ship.max_movement}}</span>
          </span>
        </div>

        {% comment %} Action Points {% endcomment %}
        <div class="flex w-full items-center justify-between">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--targeting w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate 'Action' %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="ap-container-value-min">{{pc.user.current_ap}}</span> /
            <span id="ap-container-value-max">{{pc.user.max_ap}}</span>
          </span>
        </div>
      </fieldset>
    </div>

    <!-- === SECTOR INFO (DESKTOP) === -->
    <div id="info-sector-container" class="hidden lg:flex flex-col w-full text-center z-20 border-none rounded-xl p-2 select-none">
      <div class="flex flex-wrap justify-center items-center gap-2">
        <p class="px-2 py-1 rounded-md bg-emerald-900/40 border border-emerald-500/40 text-emerald-300 shadow-inner">
          <b>{% translate "Sector" %}</b> <span id="sector-name">{{ map_informations.sector.name }}</span>
        </p>
        <p class="px-2 py-1 rounded-md bg-emerald-900/40 border border-emerald-500/40 text-emerald-300 shadow-inner">
          <b>{% translate "Faction" %}</b> {{ map_informations.sector.faction.name }}
        </p>
        <p class="px-2 py-1 rounded-md bg-emerald-900/40 border border-emerald-500/40 text-emerald-300 shadow-inner">
          <b>{% translate "Security" %}</b> {{ map_informations.sector.security.translated_name }}
        </p>

        <!-- Player coords -->
        <div class="flex items-center bg-zinc-800/70 border border-emerald-500/30 rounded-lg overflow-hidden">
          <i class="fa-solid fa-arrows-to-eye px-2 text-emerald-300"></i>
          <span id="player-coord-y" class=" p-1 font-bold text-emerald-400 bg-zinc-900/70">00</span>
          <span id="player-coord-x" class=" p-1 font-bold text-zinc-900 bg-emerald-400 rounded-r">00</span>
        </div>

        <!-- Target coords -->
        <div class="flex items-center bg-zinc-800/70 border border-emerald-500/30 rounded-lg overflow-hidden">
          <i class="fa-solid fa-satellite-dish px-2 text-emerald-300"></i>
          <span id="target-coord-name" class="font-bold bg-zinc-900/70 text-emerald-200 px-2 py-1 truncate text-center w-[125px] m-w-[125px]">
                {% translate 'Nothing selected' %}
          </span>
          <span id="target-coord-y" class="flex bg-zinc-900/70 text-emerald-400 font-bold p-1 invisible">00</span>
          <span id="target-coord-x" class="flex bg-emerald-400 text-zinc-900 font-bold p-1 rounded-r invisible">00</span>
        </div>
        
      </div>
    </div>
    <!-- === SECTOR INFO (MOBILE) === -->
    <div id="info-sector-container-mobile" class="flex flex-col w-full lg:hidden gap-2 text-emerald-200">
      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40 text-emerald-200">
        <div class="flex justify-between"><span class="uppercase">{% translate "Sector" %}</span><span class="text-emerald-200 font-bold" id="sector-name">{{ map_informations.sector.name }}</span></div>
        <div class="flex justify-between"><span class="uppercase">{% translate "Faction" %}</span><span class="text-emerald-200 font-bold" id="sector-faction">{{ map_informations.sector.faction.name }}</span></div>
        <div class="flex justify-between"><span class="uppercase">{% translate "Security level" %}</span><span class="text-emerald-200 font-bold" id="sector-security">{{ map_informations.sector.security.translated_name }}</span></div>
      </fieldset>

      <fieldset class="flex flex-col gap-2 border border-emerald-400/40 rounded-xl bg-emerald-900/30 p-2 shadow-inner shadow-emerald-900/40">
        <!-- Ballistic defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--shield-reflect w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate "Ballistic" %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="ballistic-container-value-min">{{ pc.ship.current_ballistic_defense }}</span>/
            <span id="ballistic-container-value-max">{{ pc.ship.max_ballistic_defense }}</span>
          </span>
        </div>

        <!-- Thermal defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--laser-warning w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate "Thermal" %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="thermal-container-value-min">{{ pc.ship.current_thermal_defense }}</span>/
            <span id="thermal-container-value-max">{{ pc.ship.max_thermal_defense }}</span>
          </span>
        </div>

        <!-- Missile defense -->
        <div class="flex justify-between items-center">
          <div class="flex items-center gap-2 text-emerald-300">
            <span class="iconify game-icons--dragon-shield w-[20px] h-[20px]"></span>
            <span class="uppercase tracking-wider">{% translate "Missile" %}</span>
          </div>
          <span class="font-bold text-xs">
            <span id="missile-container-value-min">{{ pc.ship.current_missile_defense }}</span>/
            <span id="missile-container-value-max">{{ pc.ship.max_missile_defense }}</span>
          </span>
        </div>
      </fieldset>
    </div>
  </div>

  <!-- === CURRENT EFFECTS (MOBILE) === -->
  <div id="current-effects-mobile"
    class="flex flex-row w-full lg:hidden justify-center mb-1 px-2">
    <fieldset class="flex text-sm items-start justify-center mx-auto gap-1 h-[25px] p-2 w-full text-start flex-col border border-emerald-500/30 rounded-md bg-emerald-900/30 shadow-inner shadow-emerald-900/40">
      <legend class="text-sm font-bold text-emerald-300 truncate">Current effects</legend>
    </fieldset>
  </div>

  <!-- === MOBILE BOTTOM BUTTONS === -->
  <div class="flex w-full lg:hidden flex-row p-2 justify-around text-emerald-400">
    <i class="fa-solid fa-id-badge fa-2x cursor-pointer hover:text-emerald-300 transition" id="character-full-info-btn"></i>
    <i class="iconify w-[2em] h-[2em] game-icons--radar-sweep cursor-pointer hover:text-emerald-300 transition" id="radar-sweep"></i>
    <i class="fa-solid fa-2x fa-walkie-talkie cursor-pointer hover:text-emerald-300 transition" id="chat-btn"></i>
  </div>

</div>
{% endif %}
{% endfor %}
<script>
</script>