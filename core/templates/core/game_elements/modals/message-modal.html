{% load customtags%}
{% load static %}
{% load i18n %}

<!-- BACKDROP -->
<div id="message-modal" class="fixed hidden inset-0 z-[9999] flex items-center md:justify-center justify-start backdrop-blur-md bg-gradient-to-br from-black/80 via-zinc-950/90 to-emerald-950/70 transition-all duration-500 ease-out overflow-hidden">

  <!-- HOLOGRAPHIC HALO -->
  <div id="holo-ring" class="absolute rounded-full blur-3xl bg-emerald-500/30 w-[60vw] h-[60vw] animate-holo-ring"></div>

  <!-- MODAL CONTENT -->
  <div id="mail-modal-content" class="relative w-full md:w-[80vw] lg:w-[70vw] h-screen md:h-[85vh] md:max-h-[900px] bg-zinc-950/95 border md:border border-emerald-500/40 md:rounded-2xl shadow-[0_0_30px_rgba(10,185,129,0.4)] flex flex-col transform scale-90 opacity-0 transition-all duration-500 ease-out overflow-hidden backdrop-saturate-150 backdrop-brightness-125">

    <!-- HEADER -->
    <div class="flex justify-between items-center px-5 py-4 border-b border-emerald-500/40 bg-gradient-to-r from-emerald-900/60 to-zinc-900/60 shadow-inner">
      <h2 class="font-orbitron text-emerald-400 text-xl md:text-2xl font-bold uppercase tracking-widest flex items-center gap-3">
        <i class="fa-solid fa-envelope-open-text text-emerald-300 animate-pulse"></i>
        {% translate "Private Messages" %}
      </h2>
      <button class="text-emerald-400 hover:text-red-400 text-2xl transition-all duration-200">
        <i id="close-mail-modal" class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <!-- TABS -->
    <div class="flex justify-around bg-zinc-900/80 border-b border-emerald-500/20 text-sm md:text-base font-orbitron uppercase">
      <button id="tab-inbox" class="tab-btn flex-1 py-2 border-2 border-emerald-400 text-emerald-300 font-semibold transition-all duration-200">
        {% translate "Inbox" %}
      </button>
      <button id="tab-sent" class="tab-btn flex-1 py-2 text-emerald-300 hover:text-emerald-200">
        {% translate "Sent" %}
      </button>
      <button id="new-message-btn" class="tab-btn flex-1 py-2 text-emerald-300 hover:text-emerald-200">
        <i class="fa-solid fa-pen-to-square mr-2 text-emerald-400"></i>
        {% translate "New" %}
      </button>
    </div>

    <!-- SEARCH -->
    <div class="p-3 border-b border-emerald-500/20 bg-zinc-950/60 flex items-center gap-3">
      <i class="fa-solid fa-magnifying-glass text-emerald-400"></i>
      <input id="search-message" type="text" placeholder="{% translate 'Search a message...' %}" class="flex-1 bg-transparent outline-none text-sm text-emerald-300 placeholder-emerald-300/40 font-semibold">
    </div>

    <!-- CONFIRMATION MESSAGE -->
    <div id="toast-container"class="transition-all duration-300 w-full px-3 flex justify-center mt-2 pointer-events-none space-y-2 flex-col">
    </div>

    <!-- LIST -->
    <div id="mail-list" class="flex-1 overflow-y-auto thin-semi-transparent-scrollbar p-3 space-y-3 text-sm md:text-base relative">
      {% include "mail-list.html" %}
    </div>
    
  </div>
</div>
